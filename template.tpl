___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Hubspot CMP - Hubspot cookie banner integration",
  "categories": [
    "PERSONALIZATION",
    "TAG_MANAGEMENT",
    "DATA_WAREHOUSING"
  ],
  "brand": {
    "id": "github.com_avoy18",
    "displayName": "avoy.me",
    "thumbnail": "data:image/jpeg;base64,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\u003d"
  },
  "description": "This template integrates with the Hubspot cookie banner and updates Google Consent State.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "PARAM_TABLE",
    "name": "defaultConsentSettings",
    "displayName": "Default consent settings",
    "paramTableColumns": [
      {
        "param": {
          "type": "TEXT",
          "name": "region",
          "displayName": "Region",
          "simpleValueType": true,
          "help": "A comma separated list of region codes. Region codes are expressed using country and/or subdivisions in ISO 3166-2 format. Leave blank for consent to apply to all regions. (example usage: UA,ES,GB,FR)"
        },
        "isUnique": true
      },
      {
        "param": {
          "type": "SELECT",
          "name": "ad_storage",
          "displayName": "ad_storage",
          "macrosInSelect": false,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "denied"
            },
            {
              "value": "granted",
              "displayValue": "granted"
            }
          ],
          "simpleValueType": true,
          "help": "Enables storage, such as cookies (web) or device identifiers (apps), related to advertising."
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "ad_user_data",
          "displayName": "ad_user_data",
          "macrosInSelect": false,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "denied"
            },
            {
              "value": "granted",
              "displayValue": "granted"
            }
          ],
          "simpleValueType": true,
          "help": "Sets consent for sending user data to Google for online advertising purposes."
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "analytics_storage",
          "displayName": "analytics_storage",
          "macrosInSelect": false,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "denied"
            },
            {
              "value": "granted",
              "displayValue": "granted"
            }
          ],
          "simpleValueType": true,
          "help": "Enables storage, such as cookies (web) or device identifiers (apps), related to analytics, for example, visit duration."
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "personalization_storage",
          "displayName": "personalization_storage",
          "macrosInSelect": false,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "denied"
            },
            {
              "value": "granted",
              "displayValue": "granted"
            }
          ],
          "simpleValueType": true,
          "help": "Enables storage related to personalization, for example, video recommendations."
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "ad_personalization",
          "displayName": "ad_personalization",
          "macrosInSelect": false,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "denied"
            },
            {
              "value": "granted",
              "displayValue": "granted"
            }
          ],
          "simpleValueType": true,
          "help": "Sets consent for personalized advertising."
        },
        "isUnique": false
      }
    ],
    "help": "Add your default consent settings here. \u003ca href\u003d\"https://developers.google.com/tag-platform/security/concepts/consent-mode#consent-types\"\u003eLearn more\u003c/a\u003e"
  },
  {
    "type": "CHECKBOX",
    "name": "ads_data_redaction",
    "checkboxText": "Redact Ads Data",
    "simpleValueType": true
  },
  {
    "type": "CHECKBOX",
    "name": "url_passthrough",
    "checkboxText": "Pass through URL parameters",
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// var log = require('logToConsole');
var callInWindow = require("callInWindow");
var createQueue = require("createQueue");
var setDefaultConsentState = require("setDefaultConsentState");
var gtagSet = require('gtagSet');
var updateConsentState = require("updateConsentState");
var getCookieValues = require("getCookieValues");
var defaultConsentSettings = data.defaultConsentSettings;
var consentModeEnabled = data.consentModeEnabled;

// Default consent state is set to denied for everything
var theConsentState = {
  ad_storage: "denied",
  analytics_storage: "denied",
  ad_user_data: "denied",
  personalization_storage: "denied",
  ad_personalization: "denied",
  functionality_storage: "granted",
  security_storage: "granted"
};

var dataLayerPush = createQueue('dataLayer');

/**
 * Splits the input in a correct way to parse the cookie data
 */
var splitCookieInput = function (input) {
  input = typeof input === "undefined" ? "" : input;
  return input
    .split("_")
    .map(function (entry) {
      return entry.trim().split(":")[1] || "false";
    })
    .filter(function (entry) {
      return entry.length !== 0;
    });
};

/**
 * Splits the input string using comma as a delimiter, returning an array of strings
 */
var splitInput = function (input) {
  return input.split(',')
      .map(entry => entry.trim())
      .filter(entry => entry.length !== 0);
};

var updateConsentObject = function () {
  var currentCookieValues = splitCookieInput(
    getCookieValues("__hs_cookie_cat_pref")[0]
  );

  theConsentState.analytics_storage =
    currentCookieValues[0] === "true" ? "granted" : theConsentState.analytics_storage;
  theConsentState.ad_user_data =
    currentCookieValues[0] === "true" ? "granted" : theConsentState.ad_user_data;
  theConsentState.personalization_storage =
    currentCookieValues[0] === "true" ? "granted" : theConsentState.personalization_storage;
  theConsentState.ad_personalization =
    currentCookieValues[0] === "true" ? "granted" : theConsentState.ad_personalization;
  theConsentState.ad_storage =
    currentCookieValues[1] === "true" ? "granted" : theConsentState.ad_storage;

  return theConsentState;
};

if (consentModeEnabled !== false) {

  // Set default consent state
  if(defaultConsentSettings){

    for(var i = 0; i < defaultConsentSettings.length; i++) {
      var settings = defaultConsentSettings[i];

      var defaultData = {
        ad_storage: settings.ad_storage,
        ad_user_data: settings.ad_user_data,
        analytics_storage: settings.analytics_storage,
        personalization_storage: settings.personalization_storage,
        ad_personalization: settings.ad_personalization,
        functionality_storage: theConsentState.functionality_storage,
        security_storage: theConsentState.security_storage,
      };

      defaultData.wait_for_update = 500;

      if(typeof settings.region === 'string' && settings.region.trim().length > 0){
        defaultData.region = splitInput(settings.region);
      }else{
        theConsentState = defaultData; // only set default for no region
      }

      setDefaultConsentState(defaultData);
    }
  }else{
    var defaultData = {
      ad_storage: theConsentState.ad_storage,
      analytics_storage: theConsentState.analytics_storage,
      ad_user_data: theConsentState.ad_user_data,
      personalization_storage: theConsentState.personalization_storage,
      ad_personalization: theConsentState.ad_personalization,
      functionality_storage: theConsentState.functionality_storage,
      security_storage: theConsentState.security_storage,
      wait_for_update: 500
    };
    setDefaultConsentState(defaultData);
  }

  if(data.ads_data_redaction){
    gtagSet('ads_data_redaction', data.ads_data_redaction);
  }

  if(data.url_passthrough){
    gtagSet('url_passthrough', data.url_passthrough);
  }

  // Add an event listener to HubSpot's consent change
  callInWindow("_hsp.push", [
    "addPrivacyConsentListener",
    function () {
      updateConsentObject();
      updateConsentState(theConsentState);
      dataLayerPush({'event': 'cookie_consent_update'});
    },
  ]);
}

// Call data.gtmOnSuccess when the tag is finished.
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "gtag"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_hsp"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "dataLayer"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_hsp.push"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "analytics_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "functionality_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "personalization_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "security_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_user_data"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_personalization"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "__hs_cookie_cat_pref"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "write_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "push"
              },
              {
                "type": 1,
                "string": "ads_data_redaction"
              },
              {
                "type": 1,
                "string": "url_passthrough"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Sept 25 - consent change updates

Jul 16 2024 - connected user controls and refactored the code to work with ES5
